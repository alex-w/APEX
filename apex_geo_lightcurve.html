<html>

<body>

<table>

<tbody>

<tr>

<td valign="top" width="300"  style="font-family:monospace">

<h2>APEX user manual</h2>

&#9675; <a href="index.html">APEX under Ubuntu</a><br>

&#9675; <a href="windows.html">APEX under Windows</a><br>

&#9675; <a href="conf.html">APEX configuration</a><br>

&#9675; <a href="apex_calibrate.html">Image calibration</a><br>

&#9675; <a href="apex_geo_auto.html">Automated image processing</a><br>

&#9675; <a href="apex_geo.html">Manual image processing</a><br>

&#9675; <a href="apex_geo_monitor.html">Image processing monitor</a><br>

&#9675; <a href="apex_geo_postprocess.html">Postprocessing</a><br>

&#9675; <a href="apex_geo_ephem.html">Ephemeris calculation</a><br>

&#9679; Satellite light curve analysis<br>

</td>

<td style="font-family:monospace">

<h3>Satellite light curve analysis</h3>

<hr>

<h4>Installation of dependecies: relevant Python packages</h4>

<p>For interactive windows install the tkinter package (required!):

<p>Python2 version:
<p style="background-color:lightgray">sudo apt-get install python-tk

<p>Python3 version:
<p style="background-color:lightgray">sudo apt-get install python3-tk

<p>For plotting install the matplotlib package (required!):

<p style="background-color:lightgray">sudo pip install -U matplotlib

<p>For PDM (phase dispersion minimization) analysis of the rotation period install the PyAstronomy package (recommended!):

<p style="background-color:lightgray">sudo pip install -U PyAstronomy

<hr>

<h4>Basic procedure</h4>

<p>The APEX script <b>apex_geo_lightcurve</b> expects you to use an XML file with photometric measurements in 'ISON format' which can be obtained after the image processing by either the <b>apex_geo</b> or the <b>apex_geo_auto</b> APEX script, if you have set the option <b>format = ison</b> in the <b>[apex.extra.GEO.report]</b> section of the <a href="conf.html">APEX configuration file</a> before the image processing.

<p>If necessary, prior to the light curve analysis adjust the script section <b>[apex_geo_lightcurve]</b> in the <a href="conf.html">APEX configuration file</a>.

<p>Put the XML file with photometric measurements in any folder of your choice, open the terminal and run the APEX script:

<p style="background-color:lightgray">apex_geo_lightcurve.py

<p>A file dialogue window will pop up. Select and open one XML file with measurements. The script will read in the entire data set contained in the selected file.

<hr>

<h4>Raw light curve plotting</h4>

<p>Upon reading the file with measurements, the script will process each satellite block contained in the file one after another, applying the option settings of the script section <b>[apex_geo_lightcurve]</b> in the <a href="conf.html">APEX configuration file</a>.

<p>If a measurement in the satellite block does not contain at least one of the tags <b>&lt;mag&gt;</b> and <b>&lt;mag_error&gt;</b>, or, if at least one of these two tags has the value <b>nan</b> (not a number), then this measurement will be excluded from the analysis. After parsing the entire satellite block, the script outputs in the terminal the final number of valid measurements available for the analysis of the current satellite.

<p>If the number of valid measurements is equal to or smaller than the value of <b>phi_tick_step</b> in the script section <b>[apex_geo_lightcurve]</b> of the <a href="conf.html">APEX configuration file</a>, then the script will immediately terminate with a corresponding warning message in the terminal. Decrease the value of <b>phi_tick_step</b> and re-run the <b>apex_geo_lightcurve</b> script.

<p>If the phase angle calculation was set to be done from the orbit (<b>phi_by_coords = False</b>), but either the orbit catalogue paths are not properly set up in the sections <b>[apex.catalog.ison_reader]</b> and/or <b>[apex.catalog.tle_reader]</b> of the <a href="conf.html">APEX configuration file</a>, or the orbit catalogues are missing in the folders indicated in those two sections, or the satellite ID (tag <b>&lt;id&gt;</b> in the measurements file) is not found in these orbit catalogues, then the script will immediately terminate with a corresponding warning message in the terminal. Solve the problem and re-run the <b>apex_geo_lightcurve</b> script.

<p>Then a window with the raw light curve plot will pop up, showing the measurements of the satellite apparent brightness versus the UT time-stamps as contained in the measurements file (tags <b>&lt;mag&gt;</b> and <b>&lt;utc&gt;</b>). The auxilary x-axis at the top shows the corresponding phase angles â€“ for the first and the last measurement and for evenly spaced measurements in-between. If the title is set to be shown (<b>show_title = True</b>), it will include the ID of the satellite (tag <b>&lt;id&gt;</b> in the measurements file) and the UT date of the first measurement.

<p>Then you can interactively delete and restore deleted data points in the plot. (see below)

<p>If the phase angle calculation was set to be done from the equatorial coordinates (<b>phi_by_coords = True</b>), or, if both the Lomb-Scargle periodogram and the PDM analysis were set to be skipped (<b>skip_lsp = True</b> and <b>skip_pdm = True</b>), then by closing the raw light curve plot window you will proceed to the next satellite block available in the measurements file, until you reach the last one and thus will finish the script execution. Otherwise, if all three options were set to <b>False</b>, then after closing the raw light curve plot window you will proceed to the rotation period search by means of either Lomb-Scargle periodiogram or PDM analysis alone or both one after another, each succeeded by the folded light curve plotting.

<p>If any data points were deleted interactively, only the remaining data points will be used in further analysis.

<p>After closing the raw light curve plot window, the script saves the current/changed data set into the same measurements file, regardless of whether you have deleted any data points or not.

<hr>

<h4>Lomb-Scargle periodogram (LSP)</h4>

<p>TBD

<hr>

<h4>Folded light curve plotting</h4>

<p>TBD

<hr>

<h4>Phase dispersion minimization (PDM) analysis</h4>

<p>TBD

<hr>

<h4>Deleting/restoring data points in light curve plots</h4>

<p>Both in the raw light curve and in the folded light curve plot you can delete single data points by left-clicking on them in the plot; in case of the folded light curve the deletion can be done only in the middle part of the triple plot. By right-clicking anywhere in the plot you can restore the deleted data points in reverse order (from the last to the first).

<hr>

<p>last updated: 19.09.2020

</td>

</tr>

</tbody>

</table>

</body>

<html>
